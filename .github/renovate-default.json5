{
  extends: ["config:base", "schedule:monthly"],
  rebaseWhen: "conflicted",
  ignorePresets: [":prHourlyLimit2"],
  automerge: false,
  semanticCommits: false,
  commitMessagePrefix: "fix(deps): ",
  vulnerabilityAlerts: {
    enabled: true,
    labels: ["security"],
    schedule: ["at any time"],
  },
  regexManagers: [
    {
      fileMatch: ["^.github/workflows/lint_golang.yml$"],
      matchStrings: [
        "golangci\\-lint\\-action[\\s\\S]+?version\\: (?<currentValue>.*)",
      ],
      depNameTemplate: "golangci/golangci-lint",
      datasourceTemplate: "github-releases",
    },
    {
      fileMatch: ["^.github/workflows/.+.ya?ml$"],
      matchStrings: [
        "setup\\-go[\\s\\S]+?go-version\\: \\^?(?<currentValue>[^$].*)",
        'matrix[\\s\\S]+?go\\: \\[\\s*"(?<currentValue>[^$].*)"\\s*\\]',
        "go-(?<currentValue>.*?)-",
      ],
      depNameTemplate: "go",
      datasourceTemplate: "golang-version",
      versioningTemplate: "loose",
    },
  ],
  packageRules: [
    {
      matchManagers: ["regex"],
      addLabels: ["no automerge"],
      commitMessagePrefix: "chore(deps): ",
    },
    {
      matchManagers: ["github-actions"],
      groupName: "github-actions",
      commitMessagePrefix: "chore(deps): ",
    },
    {
      matchPackageNames: ["go", "golangci/golangci-lint"],
      groupName: "go version and linter",
    },
    // TODO: Enable when https://github.com/renovatebot/github-action/issues/625 is fixed
    // {
    //   matchPackageNames: ["go"],
    //   postUpgradeTasks: {
    //     commands: ["gofmt -s -w ."],
    //   },
    // },
    {
      matchManagers: ["github-actions"],
      matchPackageNames: ["postgres"],
      allowedVersions: ["11"],
    },
  ],
}
