auth_step: |
  {{=<% %>=}}
  - name: 'Az CLI login'
    if: steps.changes.outputs.src == 'true' || github.event_name != 'pull_request_target'
    uses: azure/login@v1
    with:
      client-id: ${{ secrets.AZURE_CLIENT_ID }}
      tenant-id: ${{ secrets.AZURE_TENANT_ID }}
      subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}

name: "azure"

post_test_step: |
    {{=<% %>=}}
    - name: Slack Notification
      uses: rtCamp/action-slack-notify@v2
      if: ${{  github.event_name != 'pull_request_target' && failure() }}
      env:
        SLACK_CHANNEL: oss-tests
        SLACK_COLOR: ${{ job.status }}
        SLACK_MESSAGE: '<%> name %> - E2E tests failed'
        SLACK_TITLE: <%> name %> - E2E tests failed
        SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}